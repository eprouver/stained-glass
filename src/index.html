<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,height=device-height,initial-scale=1,user-scalable=no"name=viewport><title>Winner's Window</title><div id=container><div id=viewport><div id=middle class=slide data-x=-200 data-y=-1000 data-z=0><button onclick='nextSlide("gmatch")'id=war>To Battle!</button><div id=monk><svg viewBox="0 0 170 323"xmlns=http://www.w3.org/2000/svg><defs><radialGradient cx=.6 cy=.3 id=svg_10 spreadMethod=pad r=.5><stop offset=0 stop-color=#704f31 /><stop offset=1 stop-color=#3f2e1f /></radialGradient><radialGradient cx=.7 cy=.3 id=svg_17 spreadMethod=pad><stop offset=0 stop-color=#513720 /><stop offset=1 stop-color=#261f1a /></radialGradient><filter id=displacementFilter><feTurbulence baseFrequency=0.03 numOctaves=3 result=noise type=fractalNoise /><feDisplacementMap in=SourceGraphic in2=noise scale=100 xChannelSelector=R yChannelSelector=G /></filter><mask id=circleMask><circle class=displacement cx=200 cy=200 fill=#fff r=0 /></mask><filter id=light><feSpecularLighting lighting-color=#998 result=spec4 specularExponent=20><fePointLight x=120 y=40 z=100><animate attributeName=x dur=14s repeatCount=999 values=40;200;40 /><fePointLight/></feSpecularLighting><feComposite in=SourceGraphic in2=spec4 k1=0 k2=1 k3=1 k4=0 operator=arithmetic /></filter></defs><path d="M79 130c-65 83-56 148-56 148s-65 44 45 38 79-55 79-55-3-214-68-131z"fill=url(#svg_17) id=svg_1 /><g transform="rotate(3 67 211)"><path d="M59 280V142"class=thread /><path d="M63 272V150"class=thread /></g><path d="M90 73c-65 3-69 61-62 80s97 25 121 6 11-90-18-87 24-2-41 1z"fill=url(#svg_10) id=svg_2 /><text font-size=90 x=58 y=81 id=svg_3 text-anchor=start>üë¥üèº</text><text font-size=49 x=50 y=159 id=svg_4 text-anchor=start>‚úãüèº</text></svg></div></div><div id=window class=slide data-x=100 data-y=-1200 data-z=-300><div id=chooser class=help><h2>Select the panes to glorify your victory!</h2><h1 id=panes></h1></div><div id=high><div id=holder><div id=central></div></div><div id=wall><div id=holder1 class=b-hold></div><div id=holder2 class=b-hold></div><div id=holder3 class=b-hold></div></div></div></div><div id=gmatch class=slide data-x=0 data-y=-3050 data-z=-600><button id=s-match role=button>Click for New Vassals</button><div id=s-dialog><div id=match-hold><div class=backing><span class=rand id=rand-one></span></div><div class=tiny>or</div><div class=backing><span class=rand id=rand-two></span></div></div></div><div id=gboard class=slide data-x=340 data-y=-6270 data-z=-4000><h1 style=font-size:30px>Place your Vassal. Jump 3 to win. Other pieces cannot jump you.</h1><div id=b-base></div><h1 id=capt>üê¥ üê¥ üê¥</h1></div></div></div></div><div id=options><button onclick=toggleSFX(event)>SFX</button> <button onclick=toggleMusic(event)>Music</button><div id=winners style=display:none><button onclick='nextSlide("window"),document.getElementById("winners").classList.toggle("window")'id=winner>Appreciate the window</button> <button onclick='nextSlide("middle"),document.getElementById("winners").classList.toggle("window")'id=party>Back to the Party</button></div></div><div id=start-help class=help><svg viewbox="0 0 400 400"class=deco id=crown><text font-size=340 x=10 y=300 lengthAdjust=spacingAndGlyphs mask=url(#circleMask) textLength=350>üëë</text></svg><br><h1>Winner's Window</h1><p>Guide your vassals to victory!<br>Complete the whole stained glass window for the monastery.<div><button onclick='document.getElementById("start-help").style.display="none",toggleMusic(),nextSlide("middle")'id=go style=opacity:0>Let's Go!</button></div><svg viewbox="0 0 400 400"class=deco id=diamond textLength=400><text font-size=340 x=10 y=300 lengthAdjust=spacingAndGlyphs mask=url(#circleMask) textLength=350>üíé</text></svg></div><script>eval(Function("[M='KvBumcEcwQ|DQiN_vwEH[Vy{hPtp[aCX@`_^PuQMcENkR`FPo_WVBSRDYWa^WIuoq^SuPD}~~AlGdLkbNFIinzvQzb?jVzkgqeFzJEiRPy`xUD@uaU[d@oAzz?_o?Vty_CsoxUlmxfwhscZpIqf}R[vQKmyrsX|syqMnFV`w@]aGohmUv@}^PgmBzNERSNJFvJUkESCmtx[Ii[f}fK`H`mCEVLiww{K|~xlDa|e^AxRNBbD]T]QVCjDJ^u}I|pECf^qPervI~KtO_qQBImov}aoul}PZtA}]jra_L^ZZXDOVIT]`m[TtshFDx~IZmehBzoWZ{UNGKthkPjTqxTpojzMDu~orsO@mgcVRnu{W@KDX}oSvMXHszJe[OoipKamS{{aA{GCiQ{[xph~~d{@L}XHRgmDohqoUo]?[yeri^JiIAbvsxEpzOiPF_pAqT]poExxegE?LFPAUleVsY`OJuNlOF]QnHyGfT^iF`Yzw`UxfeHPRwRWFhiJA^{wuWnsz|pc@KJtQMU|Eq@ZJAvUNfTQIdqExikrkhQE[[meVxRvlYhRUy`RAPTIKHOJBPfECMQkU`wTWEj~yPMbbpMR^NVOH`|j`}d~`OO|[Czqnoyh^YLlnqgObXdoxuTpawtYI[sVXZg}xXM^xriebTvfFGLrf{KwxVIHw_yUBnGJZp@pq~xYW@HngTn|ObKRGXGfGw|cBHZw}jzmn?[VWzSxUHVWejnWVAN@t[]]`kLd~Axm|?^F@kqCLUlUUWdc?cMUUmPYHx[GkV|DFjwuB?j?|mrOMyLI@MNlz|CTxOmnZtVOeZsuOGuB~}R~Iy]]to_r^`dXNMCbPhqZd@rLOh|BzkrtPczGxtKAzpdPs{bF?SkD]}IVROeNBx[hTWPHZOQaThqVHiqROyRBI[OX^bqL}~pocjVkD]qFihQMlG_PRp]bCqSrbdcPEBCgAg]v@HZ^mS|Ycv]gLxwIVREoFr{PFJa@|EV]yYJUmT}yR^TWTZnb]ZrJyXjFylIRpAT`yC?De}RJNiH[xzj~cyKqU|lzHVD|GSetx`uaFZexdYiDiJk~gjKANug@CacifUkjGIWH}P[wayY]I^xxOeuLDnT]n@p[jZmTUAcrIGluct]^Ttu__sV`t~}jAz[OrPwW_UGLP~JKXuxBjtWcow]@SGqsh|@UDrt}FTrRbab`A}|HIRmP`q{oTi}XZwqTU]dkRvpREt]kyQocfd[]cXIX??NikF`BRR{w~qt`lduyHZUxzaeUDR[vqFbuapibmEbJVnR`VjgPc[WfydKP[Vs|B{xEkWrseBfe?ifTHIRardWYF[r~rzNSQCkdgmeIpmffVhSnMArH{O_QGpyqYA`sgIfQqSoeJGjxmLwnx@XAaQIk@hffkk|eBCSpzWV`NzmQ@piUrkHXPaiKIci}a?ieI^xDCkLAwPBnpN|gyfS{`QHLdPmGvQPwS{vwCQcmpQWDnsWNrEpI_xAfByhc|IXR``udUMfHbCsR{}~IGDjEMw?`twkLWw|Ic}vED@oJ~r`YWfkKlQujei|uMqtTvFoORz_`sFb{{BlSUDsA{MdIwreG[HZ@J^wIq]TzUBJbn^E|?JztFWmmoEGgA~RfxjaRcr[dJGhTYKlbs{`YOZ@{EkiZlMrVq@YR@}jIzBPvoE{|YPBCXm~hc@SIcxBzoCVq~bW_OtX`VDbY@kMsMLKc|QvFnkXTC|sUfT{CzPj?^y?nNcl}m?EdAt?vbWAbUhC@LsNhlmD_VyvLhcccr^z_NKl~YYf@AjbHWdqgZYnR@pOJRCJW_V^RncEPbuy{n^{SLbDLCcAl}iF`@LJPXFsqXOaTVLw~VN?T}kwWK^tTO~CygX[fEorJmEDbHU|W|INUTryil~]]ERD@}EOl{ronWk`Jx~Ktfu|{HWjp[K[zMkvmVS~zEcnLYrzkJ{hqSQEMPfZfD}DKUFoqay?sd}XNNn?tqyAs[MkzvxZcpfrEu_iqn[N{IZoz{HKud}noV]TTz`Lh}RwWTJu[STaxnDlZpbu{eN}dAxCN}A{snOVnBtrs`KzrH{bZwRxKHttPFVlNwTgmOk^RtHS`NHSIVJjfcPI~rAiaYtUHVTRpBcANpdPlfVCgbSQV}mDRhdIp?yQ^Zz]L|iYl^WmMq|IiTQZI|s|_@CZPxqx`vVcmMujNF{lgWdjvQ`Qqti[]q~z?cTjgsZUJcRCiBuuFwbCi`dYUQTG~kPOVOphOT{AqEPIVtsRQ[Yqgk_b}ifZVEzXxoqKKwzwzR[E?fcCsQqU``UDUxNpX|IC_|zCCzOQDUviGViTOdpACa{lMZO~@yFcxEjF|JEvMHgAo^cdhJ`QPm{NAD[KBkvlGGs|nj_vB~eY^QH`[GCA|_guI^S_NCZ^{m^{AR[@jZqw?Nkxi?PzqDBxfCByfsm^NaDjlQlsnKACkEROJDEnKqoOWfo`ol~UKB|UOjjs^OR}kAYWjsgDM`}c{}JgRUBA_oKeBXrHjee^WUe?fbmrYwFK{RC^a~KdMCEh?vZRtVjXDtH`s{k}TfBQFkugbrlVFmHLYre^k`X@jSdGbmS@KyKDdj?XuXaz][yR]kEYMr~^Gy?iEizZLX|ZPqmiIuoHX?JG~|RgnUKFIirs{gYoXgp]js|NW]zMXRPAVF{EccJWMu@}gCiIkb}?V}^O^T~tqvU?rbUiiEgHMs`|FOzvv[dwGfhbhhq^hb`BXFs]FnCUWA|WfJhPWIXO[EbU|nJMEz|^RXtLeV{EdfpjyWQenEAvJt`@lBZMjySvPrYg_MJaSxJqHLLsdKN?G^nk_AEXVNmF]m^TFvP_|bJHhh]JhePDxEYrKCnJ^oLUt@FWSthNmfpqI]c|O}qIzZcPgpSisgNzfFoHoJMRYTBLHVY?EHWLh]|GF@`AsJJLGFy`RYoaNwXcwdboG{BBjPtFBnhKbRpadGae`jNEAJn[s`@`zlvo_q@xKFmx]][HvHPl|cjWnPZDhsFBPzPKRObF~ja~F~zt|{|dqLnBZ[jChgyzMsETVbbdHeQHfdURoFNqwVkg`jL{HT@~erT}Kr}zc|nXLWgaGBjkihyw{DN{Qsj@VqLVW|RAQEVnOQKIPYOHWUIGjhwyo}cZU]HQ{z`UYdmH?PXohFDq{D[suJIgFDVgsMUGdjYVLmjX`mfRXn`cQIWoUKnCNpdzexhlZJ]UvZCxLumdhpb_~jepRiofiQCnqbzApCKaJTA?xrYK?yVNzJ|NaKOY`[xicsfignjvOTM`u{j?zZDYWfrnAYPZQX_VGbPWZeLQ{WfqAGSVgj[zcG?CER|BNdTf}ltQ`uSaaNHFPrI[``v}nGFTniKhk@AjrlRPN_]lYLDhzC?]bWYGpSmPM_pMyngj`Q^_wOVK{vWa|SgYNHZay{zt`MdVL@{sOhLIZLiKsPHrxadDUGzQG|mq`tk~BFV|fOWVsL?xeI^UxjNUjUPbIPxjOxcXXXasXNQOmabq[v@JMIhxlziDLHfbfVDyx?jOYkGntjyIRd[B}B?AO_cNzRVpkxE{q]}cGmI{dRbFRXModkHw_[gGTnmowZzdFio{~F'"
,...']charCodeAtUinyxpf',"for(;e<8279;c[e++]=p-=128,A=A?p-A&&A:(p==39|p==96)&&p)for(p=1;p<128;y=f.map((n,x)=>(U=r[n]*2+1,U=Math.log(U/(h-U)),t-=a[x]*U,U/500)),t=~-h/(1+Math.exp(t))|1,i=o%h<t,o=o%h+(i?t:h-t)*(o>>17)-!i*t,f.map((n,x)=>(U=r[n]+=(i*h/2-r[n]<<13)/((C[n]+=C[n]<5)+1/20)>>13,a[x]+=y[x]*(i-t/h))),p=p*2+i)for(f='010202103203210431053105410642065206541'.split(t=0).map((n,x)=>(U=0,[...n].map((n,x)=>(U=U*997+(c[e-n]|0)|0)),h*32-1&U*997+p+!!A*129)*12+x);o<h*32;o=o*64|M.charCodeAt(d++)&63);for(C=String.fromCharCode(...c);r=/[\0-]/.exec(C);)with(C.split(r))C=join(shift());return C")([],[],1<<17,[0,0,0,0,0,0,0,0,0,0,0,0],new Uint16Array(51e6).fill(1<<15),new Uint8Array(51e6),0,0,0,0))
const viewport=document.getElementById("viewport"),container=document.getElementById("container"),slides=[...document.getElementsByClassName("slide")],captured=[];let vassals=[],contexts=[],interval;const config={width:1200,height:910,base:[0,2e3,0,0,0,0],volmul:2};let music=!1,sfx=!0,winning=!1;const m=Math,randBetween=(e,t)=>~~(m.random()*(t-e+1)+e),dink=[.75,0,730.8128,,.03,.07,1,1.21,,,,,,,,,,.47,.07],trumpet=[.45,0,43,,.25,.25,2,22,,,50,,.3,,,,,.87],emojis=["üêï","üêà","üêÅ","üêá","ü¶ä","üêª","üê¥","ü¶Å","üè∞","üå∑","‚öîÔ∏è","üìú","üëë","ü¶Ñ","üçÑ","ü¶î","üåπ","üåª","üåº","üå±","‚òòÔ∏è","üçÄ","üå∞","üå≤","‚öúÔ∏è","üêç","üïäÔ∏è","ü¶â","ü¶¢","üçì","üç∑","üçá","üçû","üóùÔ∏è","ü¶ó","üî±","üê∏","ü¶ö","üêî","üíÄ","ü¶á","üåà","üêñ","üéÄ","ü§ùüèª","ü•Ä","üñ§","‚ù§Ô∏è","üêå","ü¶®","üê¢","üíé","üí™üèΩ","üî•","‚òÑÔ∏è","‚òÄÔ∏è","üïØÔ∏è","ü•™"];function weightedRandomNumber(e,t){const n=-.3*m.random();return e+~~((m.pow(m.E,n)-1)/(m.pow(m.E,-.3)-1)*(t-e+1))}zzfxV=.3,zzfx=(e=1,t=.05,n=220,a=0,o=0,s=.1,r=0,l=1,i=0,d=0,c=0,m=0,h=0,u=0,g=0,f=0,p=0,y=1,w=0,x=0,v=Math,T=44100,b=2*v.PI,z=(i*=500*b/T/T),E=(n*=(1-t+2*t*v.random(t=[]))*b/T),$=0,I=0,M=0,B=1,k=0,L=0,j=0,S,C)=>{if(sfx){for(e*=config.volmul,d*=500*b/T**3,g*=b/T,c*=b/T,m*=T,h=T*h|0,C=(a=T*a+9)+(w*=T)+(o*=T)+(s*=T)+(p*=T)|0;M<C;t[M++]=j)++L%(100*f|0)||(j=r?1<r?2<r?3<r?v.sin(($%b)**3):v.max(v.min(v.tan($),1),-1):1-(2*$/b%2+2)%2:1-4*v.abs(v.round($/b)-$/b):v.sin($),j=(h?1-x+x*v.sin(b*M/h):1)*(0<j?1:-1)*v.abs(j)**l*zzfxV*e*(M<a?M/a:M<a+w?1-(M-a)/w*(1-y):M<a+w+o?y:M<C-p?(C-M-p)/s*y:0),j=p?j/2+(p>M?0:(M<C-p?1:(C-M)/p)*t[M-p|0]/2):j),$+=(S=(n+=i+=d)*v.cos(g*I++))-S*u*(1-1e9*(v.sin(M)+1)%2),B&&++B>m&&(n+=c,E+=c,B=0),!h||++k%h||(n=E,i=z,B||=1);return(e=zzfxX.createBuffer(1,C,T)).getChannelData(0).set(t),(n=zzfxX.createBufferSource()).buffer=e,n.connect(zzfxX.destination),n.start(),n}},zzfxX=new AudioContext;{let e,t,n,a,o,s,r,l,i,d,c,m,h,u,g,f,p,y,w,x,v,T;s=(o=Object).getPrototypeOf,r=document,l=(e,t,n,a)=>(e??(setTimeout(n,a),new Set)).add(t),i=(e,t,a)=>{let o=n;n=t;try{return e(a)}catch(e){return console.error(e),a}finally{n=o}},d=e=>e.t=e.t.filter((e=>e.l?.isConnected)),m=s(c={get val(){return n?.add(this),this.o},get oldVal(){return n?.add(this),this.i},set val(e){let n=this;if(e!==n.o){n.o=e;let a=new Set;for(let e of[...n.u])p(e.f,e.s),e.g=1,e.h.forEach(a.add,a);for(let e of a)e.u=e.u.filter((e=>!e.g));n.t.length?t=l(t,n,v):n.i=e}}}),h=s(i),u=e=>({__proto__:c,o:e,i:e,t:[],u:[]}),g=e=>s(e??0)===c,f=(t,n)=>{let o=new Set,s={f:t},c=i(t,o,n);for(let t of o)a=l(a,t,(()=>(a.forEach(d),a=e)),1e3),t.t.push(s);return s.l=(c??r).nodeType?c:new Text(c)},p=(e,t=u())=>{let n=new Set,a={f:e,h:n,s:t};t.val=i(e,n);for(let e of n)e.u.push(a);return t},w={},x=t=>new Proxy(((n,...a)=>{let[l,...i]=s(a[0]??0)===m?a:[{},...a],d=t?r.createElementNS(t,n):r.createElement(n);for(let[t,a]of o.entries(l)){let r=n=>n?o.getOwnPropertyDescriptor(n,t)??r(s(n)):e,l=n+","+t,i=w[l]??(w[l]=r(s(d))?.set??0),m=i?i.bind(d):d.setAttribute.bind(d,t),u=s(a??0);u===c?f((()=>(m(a.val),d))):u!==h||t.startsWith("on")&&!a.v?m(a):f((()=>(m(a()),d)))}return y(d,...i)}),{get:(t,n)=>t.bind(e,n)}),v=()=>{let n=[...t].filter((e=>e.o!==e.i));t=e;for(let t of new Set(n.flatMap(d))){let n=t.l,a=f(t.f,n);t.l=e,a!==n&&(a!=e?n.replaceWith(a):n.remove())}for(let e of n)e.i=e.o},T={add:y=(t,...n)=>{for(let a of n.flat(1/0)){let n=s(a??0),o=n===c?f((()=>a.val)):n===h?f(a):a;o!=e&&t.append(o)}return t},_:e=>(e.v=1,e),tags:x(),tagsNS:x,state:u,val:e=>g(e)?e.val:e,oldVal:e=>g(e)?e.oldVal:e,derive:p},window.van=T}const{div:div}=van.tags,synth=window.speechSynthesis;let voice,utterance;const speak=(e,t=.4)=>{sfx&&(synth.cancel&&synth.cancel(),utterance=new SpeechSynthesisUtterance(e),utterance.voice=voice,utterance.volume=t*config.volmul,utterance.rate=.8,synth.speak(utterance))};window.speechSynthesis.onvoiceschanged=function(){const e=speechSynthesis.getVoices();voice=e.filter((e=>"en-GB"===e.lang))[0]};const win=()=>{[...document.getElementsByClassName("circle")].forEach(((e,t)=>{e.innerText=vassals[t%vassals.length]})),winning=!0;music=!1,contexts.forEach((e=>{e&&"running"==e.state&&e.close()})),contexts=[],interval&&clearInterval(interval),war.style.display="none",document.getElementById("chooser").style.display="none",holder.style.opacity="1",zzfx(...[.7,0,200,.1,3,.2,,3.5,,,,,.02,,,,,.72,.12,.5]),zzfx(...[.7,0,200,.1,3,.2,,3.5,,,100,,.25,,,,,.42,.12,.5]),zzfx(...[.7,0,400,.1,3,.2,,3.5,,,,,,,,,,.72,.12,.5]),setTimeout((()=>{nextSlide("middle"),document.body.classList.add("winning"),document.getElementById("winners").style.display="block",speak("We bless you, and your wonderful efforts."),setTimeout((()=>{const e=["svg_1","svg_2","svg_3","svg_4"];let t=-1;const n=document.getElementById("monk"),a=.3;setInterval((()=>{t+=1;document.getElementById(e[t%e.length]).style.transform=`translate3d(${10*Math.random()-5}px,0px, 0)`,o%2==0?zzfx(...[.03,0,1501,,.12,,,2,,,,,,,,,,0,.05]):zzfx(...[.06,0,501,,.12,,,2,,,,,,,,,,0,.05])}),200),setInterval((()=>{zzfx(...[1,0,121,,.12,,,4,,,,,,,,,,0,.05]),[...document.getElementsByClassName("circle")].concat([...document.getElementsByClassName("bord")]).concat([document.getElementById("central")]).sort((()=>.5-Math.random())).slice(0,4).forEach((e=>e.style.filter=`hue-rotate(${360*Math.random()}deg)`)),n.style.filter=`hue-rotate(${20*Math.random()-10}deg)`}),400),setInterval((()=>{n.style.transform=`scale(1.2) translate3d(${210*Math.random()}%,250px, 0) rotate(${Math.random()>.5?-3:3}deg`}),5e3);let o=0;setInterval((()=>{o+=1;const e=randomName(emojis[~~(Math.random()*emojis.length)]);o%3==0&&(document.getElementById("winners").classList.remove("window"),nextSlide("middle")),o%4==0?Math.random()>.5?Math.random()>.5?speak("My lady? My lady lady? wha?",a):speak("My lord? What's up.",a):speak(`My goodness, ${e.split(",")[0]}, a trip to ${e.split(", of")[1].trim()}? ${Math.random()>.5?"Never been there!":"Sounds Lovely!"}`,a):speak(["Hello, ","Hi there, ","My dear, ","Welcome, ","We bless your efforts, "][~~(5*Math.random())]+e.split(",")[0],a)}),1e4)}),5e3)}),5e3)},len=.5,musicVolume=.02*config.volmul,P=(D,index)=>{contexts[index]=new AudioContext;const ac=contexts[index];with(I=+len,ac)with(G=createGain())for(i=0;i<D.length;i++)with(createOscillator())D[i=+i]&&"0"!=D[i]&&(connect(G),G.connect(destination),start(i*I+.3),frequency.setValueAtTime(440*1.06**(-105+D.charCodeAt(i)-14),i*I+.2),frequency.setTargetAtTime(440*1.06**(-105+D.charCodeAt(i)-10),i*I+.25,.02),type="triangle",gain.setTargetAtTime(.01,i*I+.2,.01),gain.setValueAtTime(musicVolume+.008,i*I+.3),gain.setTargetAtTime((m.random()+.004)*musicVolume,i*I+.3+.1,.05),gain.setTargetAtTime(.001,i*I+.3+I,.05),stop(i*I+.3+I-.01));setTimeout((()=>{"running"==ac.state&&ac.close()}),1e3*(D.length*I+.3+I-.01))},songs=["xzxzxzl0lnlnlng0dddgggd0nlodnlodnlodq0nlonlq","bhh0bhh0bhhjjji0bhh0bhh0bhhiilln0ppn0ppn0pqb","aaae0aaae0cccaaaeeea00hhhm00jjjr00lllmmmlqlm","lm0fedc0op0ihgf0lm0fedc0lm0fefi0lmnolmnolmno","lp0phijk00lp0phijkk0lpkj0ijki0lp0lp0lp0phijk"],playMusic=e=>{const t=songs[~~(m.random()*songs.length)];contexts=[null,null],P(t,0),setTimeout((()=>{P(t,1)}),e||0)},toggleSFX=e=>{e&&e.target.classList.toggle("strike"),sfx=!sfx,sfx||synth.cancel&&synth.cancel()},toggleMusic=e=>{e&&e.target.classList.toggle("strike"),music=!music,contexts.forEach((e=>{"running"==e.state&&e.close()})),contexts=[],interval&&clearInterval(interval),music&&(playMusic(),interval=setInterval((()=>{music&&playMusic(250*~~(8*m.random()))}),3e4))};let currentIndex=0;const slideValues=["middle","gmatch","gboard","window"],windowScale=()=>{const e=window.innerHeight/config.height,t=window.innerWidth/config.width;config.size=e>t?t:e,container.style=`transform: scale(${config.size})`};window.onresize=windowScale;const viewportTransform=e=>`transform: rotateZ(${(e=e.map((e=>-e)))[5]}deg) rotateY(${e[4]}deg) rotateX(${e[3]}deg) translate3d(${e[0]}px, ${e[1]}px, ${e[2]}px)`,contentTransform=e=>`transform: translate(-50%, -50%) translate3d(${e[0]}px, ${e[1]}px, ${e[2]}px) rotateX(${e[3]}deg) rotateY(${e[4]}deg) rotateZ(${e[5]}deg);`;let ns,points,degs,vals;ns=null,points=[0,0,0],degs=[0,0,0],viewport.style=viewportTransform(config.base);const warbtn=document.getElementById("war"),nextSlide=e=>{warbtn.classList.remove("shown"),"middle"!=e||winning||(speak("we bless you, and your efforts",.7),setTimeout((()=>{warbtn.classList.add("shown")}),2900)),e=document.getElementById(e),slides.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),points=[e.dataset.x||0,e.dataset.y||0,e.dataset.z||0],degs=[0,-10*currentIndex,0],vals=points.concat(degs),e.style=contentTransform(vals),viewport.append(e),container.style=`transform: scale(${config.size})`,windowScale(),e.style=contentTransform(vals),viewport.style=viewportTransform(vals),currentIndex=(currentIndex+1)%slideValues.length};let c,ctx;slides.forEach(((e,t)=>{points=Object.values(e.dataset).map((e=>Number(e))),degs=[0,-30*t,0],vals=points.concat(degs),e.style=contentTransform(vals)}));const size=200,complexity=50,colors=["#0288db","#00b3c7","#086dbd","#01c0cc","#4783d8","#45d2ef","#49c0ff","#0091bb","#76a3ff","#019ce5"];function main(e){const t=div(),n=div({class:"crest"}),a=div({class:"cover"});t.onclick=()=>{if(n.innerText=captured.shift(),t.classList.toggle("open"),document.getElementById("panes").innerHTML=captured.join(" "),zzfx(...[,0,100,.14,.5,.41,,15,,,20,.25,.19,,,,,.52,.23,.4]),0==captured.length){if(9==document.getElementsByClassName("open").length)return void setTimeout(win,1e3);nextSlide("middle")}},t.classList.add("bord"),c=document.createElement("canvas"),c.classList.add("glass"),c.width=size,c.height=size,ctx=c.getContext("2d");let o=[];for(x=f=0,w=[];f<(s=size);f++)w[f]=[];for(let e=0;e<(l=complexity);e++)o.push([~~((r=m.random)()*s),~~(r()*s),~~(r()*size)]);for(let e=0;e<s;e++)for(let t=0;t<s;t++)for(let n=1/(j=0);j<l;j++){let a=o[j];(d=m.hypot(a[0]-e,a[1]-t))<n&&(n=d,w[e][t]=a[2])}draw(),t.appendChild(c),t.appendChild(n),t.appendChild(a),e.appendChild(t)}function draw(){for(var e=0;e<size;e++)for(var t=0;t<size;t++)ctx.fillStyle="black",w[e-1]&&w[e+1]?w[e][t]==w[e-1][t]&&w[e][t]==w[e][t-1]&&w[e][t]==w[e+1][t]&&w[e][t]==w[e][t+1]&&(ctx.fillStyle=colors[w[e][t]%colors.length],ctx.fillRect(e,t,1,1)):ctx.fillRect(e-2,t-2,5,5)}setTimeout((()=>{for(let e=1;e<4;e++){const t=document.getElementById(`holder${e}`);main(t),main(t),main(t)}const e=document.getElementById("holder"),t=document.getElementsByClassName("glass");document.getElementById("central").style.backgroundImage=`url(${t[6].toDataURL()})`,emojis.slice(0,10).forEach(((n,a)=>{if(1==a)return;const o=div(),s="188px";o.classList.add("circle"),o.style.transform=`translate(\n    calc(cos(${55+36*a}deg) * ${s}), \n    calc(sin(${55+36*a}deg) * ${s})\n  )`,o.style.filter="contrast(0.8) brightness(1.2)",o.style.backgroundImage=`url(${t[a%t.length].toDataURL()})`;const r=div();r.innerText=n,o.appendChild(r),e.appendChild(o)}))}),0);let round=0;const gameLoop=e=>{round+=1,vassals.push(e);const t=130;let n=[];const a=document.getElementById("b-base"),o=document.getElementById("capt");a.classList.remove("winner"),a.innerHTML="",o.innerHTML="";let s=[e];for(;-1!==s.indexOf(e);)s=emojis.sort((()=>Math.random()-.5)).slice(0,5);const r=div({id:"player",class:"hidden player",emoji:e},...[...new Array(20)].map(((t,n)=>div({class:"zer",style:`transform: translateZ(${.01*n}em) rotateZ(45deg)`},e))));van.add(a,[...new Array(5)].map((e=>[...new Array(5)])).map(((e,t)=>div({class:"row"},e.map(((e,n)=>div({id:`cell-${t}-${n}`,class:"cell"})))))),[...new Array(10)].map(((e,a)=>()=>{const e=round%2==0?a%2+3:a%2,o=a%5,r={bad:s[a%s.length],row:e,col:o,id:"baddie"+n.length};return n.push(r),div({id:r.id,class:"baddy",style:`transform: translate3d(${o*t}px,${e*t}px,0)`,emoji:r.bad},...[...new Array(10)].map(((e,t)=>div({class:"zer",style:`transform: translateZ(${.02*t}em) rotateZ(45deg)`},r.bad))))})),r);const l=(e,t)=>{arr=[];for(var n=-1;n<=1;n+=2)arr.push([e+n,t]);for(var a=-1;a<=1;a+=2)arr.push([e,t+a]);return arr.filter((e=>e[0]>-1&&e[0]<5&&e[1]>-1&&e[1]<5))},i=()=>{const e=r.dataset.loc.split(",").map((e=>Number(e))),s=l(e[0],e[1]),d=n.map((t=>(t.dist=Math.sqrt(Math.pow(e[0]-t.row,2)+Math.pow(e[1]-t.col,2)),t))).sort(((e,t)=>e.dist-t.dist+.3*Math.random())).filter((t=>(t.moves=l(t.row,t.col).filter((t=>-1===s.concat([e]).concat(n.map((e=>[e.row,e.col]))).map((e=>e.toString())).indexOf(t.toString()))),t.moves.length>0)))[0],c=d.moves.sort((e=>Math.random()-.5))[0];d.row=c[0],d.col=c[1],document.getElementById(d.id).style.transform=`translate3d(${d.col*t}px,${d.row*t}px,0)`;let m=l(e[0],e[1]);m=m.map((t=>{const a=n.map((e=>[e.row,e.col])),o=a.filter((e=>e[0]==t[0]&&e[1]==t[1]))[0];if(o){const t=[o[0]-e[0]+o[0],o[1]-e[1]+o[1]];return!a.filter((e=>e[0]===t[0]&&e[1]==t[1]))[0]&&t[1]>-1&&t[1]<5&&t[0]>-1&&t[0]<5?{col:t[0],row:t[1],cap:!0,bad:o}:null}return{col:t[0],row:t[1]}})).filter((e=>e)),m.map((e=>document.getElementById(`cell-${e.col}-${e.row}`))).forEach(((e,s)=>{e.classList.add("highlight"),e.onclick=l=>{l.preventDefault(),l.stopPropagation();const d=m[s],c=e.id.split("-").slice(1).map((e=>Number(e)));if(r.style.transform=`translate3d(${c[1]*t}px,${c[0]*t}px,0)`,r.dataset.loc=c,[...document.getElementsByClassName("highlight")].forEach((e=>{e.classList.remove("highlight"),e.onclick=null})),d.cap){const e=n.findIndex((e=>e.row==d.bad[0]&&e.col===d.bad[1])),t=document.getElementById(n[e].id);t.classList.add("dead"),[...t.children].forEach((e=>{e.style.transform=`translate3d(${800*Math.random()-400}px, ${800*Math.random()-400}px, ${200*Math.random()}px) rotateX(${2e3*Math.random()-1e3}deg) rotateY(${2e3*Math.random()-1e3}deg) scale(0.5)`,e.style.filter="contrast(0) brightness(10)",e.style.opacity="0"})),setTimeout((()=>{t.classList.add("hidden"),t.parentElement.removeChild(t),n.splice(e,1)}),500),zzfx(...trumpet),captured.push(t.getAttribute("emoji")),o.innerText+=t.getAttribute("emoji")}else zzfx(...dink);captured.length<3?setTimeout(i,600):(document.getElementById("panes").innerHTML=captured.join(" "),zzfx(...[1,0,121,,.12,,,4,,,,,,,,,,0,.05]),setTimeout((()=>{a.classList.add("winner"),zzfx(...[1,0,121,,.12,,,4,,,,,,,,,,0,.05]),zzfx(...[.7,0,662,.17,1.2,.2,,,.25,,420,.5,.25,,,,.03,.86,.1,1]),[...document.getElementsByClassName("baddy")].concat([...document.getElementsByClassName("cell")]).forEach((e=>e.style.transform="rotate(45deg) scale(0)"))}),500),setTimeout((()=>{setTimeout((()=>{a.classList.remove("winner")}),1e3),nextSlide("window")}),2100))}}))},d=[...document.getElementsByClassName("cell")].filter((e=>round%2==0?Number(e.id.split("-")[1])<3:Number(e.id.split("-")[1])>1));d.forEach((e=>{const n=e.id.split("-").slice(1).map((e=>Number(e)));e.classList.add("highlight"),e.onclick=e=>{e.preventDefault(),e.stopPropagation(),r.classList.remove("hidden"),r.style.transform=`translate3d(${n[1]*t}px,${n[0]*t}px,0)`,r.dataset.loc=n,d.forEach((e=>{e.classList.remove("highlight"),e.onclick=null})),setTimeout(i,300)}}))},start=document.getElementById("s-match"),gmatch=document.getElementById("gmatch"),randOne=document.getElementById("rand-one"),randTwo=document.getElementById("rand-two");function randomName(e){const t=["Rose","Lily","Black","Fern","Violet","Ivy","Holly","Basil","Thyme","Sage"],n=["Hill","Valley","River","Lake","Meadow","Forest","Stone","Cave","Brook","Glen","Field"],a=["ham","shire","cott","worth","bury","stead","well","bridge","church","ville","thorn"],o=t[Math.floor(Math.random()*t.length)],s=n[Math.floor(Math.random()*n.length)],r=Math.random()>.5?a[Math.floor(Math.random()*a.length)]:a.sort((()=>.5-Math.random())).slice(0,~~(3*Math.random())).join("");return`${Math.random()>.5?"sir":"lady"} ${Math.random()<.9?"":"mick"}${e} ${r}, of ${o}${s}`}const clearMatch=()=>{setTimeout((()=>{randOne.innerText="",randTwo.innerText=""}),1e3)};let booping=!1,timer;const beepBoop=()=>{if(!booping||timer>900)return setTimeout((()=>{zzfx(...trumpet);const e=randomName(randOne.innerText);randOne.onclick=()=>{""!=randOne.innerText&&(speak(e),nextSlide("gboard"),clearMatch(),gameLoop(randOne.innerText))};const t=randomName(randTwo.innerText);randTwo.onclick=()=>{""!=randTwo.innerText&&(speak(t),nextSlide("gboard"),clearMatch(),gameLoop(randTwo.innerText))},speak(`Choose Your Vassal, , , , ${e}, , or ${t}`)}),250),zzfx(...dink),booping=!1,gmatch.style.pointerEvents="auto",void(start.disabled=!1);zzfx(...[.25,.5,430.8128,,.03,.07,1,1.21,,,,,,,,,,.47,.07]),timer*=m.max(1.06,timer/(600*weightedRandomNumber(.3,1))),setTimeout((()=>{const e=randOne.innerText+randTwo.innerText;for(;randOne.innerText+randTwo.innerText===e||randOne.innerText===randTwo.innerText||""==randOne.innerText||""==randTwo.innerText;)m.random()>.5?randOne.innerText=emojis[~~(m.random()*emojis.length)]:randTwo.innerText=emojis[~~(m.random()*emojis.length)];beepBoop()}),m.min(700,timer))};start.onclick=()=>{timer=100,booping=!0,gmatch.style.pointerEvents="none",start.disabled=!0,beepBoop()},setTimeout((()=>{document.getElementById("go").style.opacity="1",document.querySelector(".displacement").animate([{r:"0"},{r:"300"}],{duration:4e3,iterations:1,fill:"forwards"})}),10);</script>